---
title: SSO 配置问题
ms.author: v-smandalika
author: v-smandalika
manager: dansimp
ms.date: 01/17/2021
ms.audience: Admin
ms.topic: article
ms.service: o365-administration
ROBOTS: NOINDEX, NOFOLLOW
localization_priority: Priority
ms.collection: Adm_O365
ms.custom:
- "7760"
- "9004346"
ms.openlocfilehash: 5ab56ec1eda10ea059e600e8933ce85bb143b76e
ms.sourcegitcommit: 6d02eb533fd74199af6b20f714b3720991da2c4a
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/18/2021
ms.locfileid: "49886785"
---
# <a name="sso-configuration-issues"></a><span data-ttu-id="9c590-102">SSO 配置问题</span><span class="sxs-lookup"><span data-stu-id="9c590-102">SSO configuration issues</span></span>

1. <span data-ttu-id="9c590-103">按照 [快速入门：配置应用的属性](https://docs.microsoft.com/azure/active-directory/manage-apps/add-application-portal-configure)指南来配置你的应用。</span><span class="sxs-lookup"><span data-stu-id="9c590-103">Follow the [Quickstart: Configure properties for an application](https://docs.microsoft.com/azure/active-directory/manage-apps/add-application-portal-configure) guide to configure your application.</span></span>
2. <span data-ttu-id="9c590-104">取决于应用和你选择的[单一登陆选项](https://docs.microsoft.com/azure/active-directory/manage-apps/sso-options)，按照下列的指南进行合适的操作：a.</span><span class="sxs-lookup"><span data-stu-id="9c590-104">Depending on the application and [Single sign-on option](https://docs.microsoft.com/azure/active-directory/manage-apps/sso-options) that you chose, follow the appropriate guidance below: a.</span></span> <span data-ttu-id="9c590-105">要配置 **基于 SAML 的单一登陆 (SSO)** 的 **本地应用**，请参阅[使用应用程序代理的本地应用 SAML 单一登陆](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy-configure-single-sign-on-on-premises-apps)。</span><span class="sxs-lookup"><span data-stu-id="9c590-105">To configure an **on-premises application** for **SAML-based single sign-on (SSO)**, see [SAML single-sign-on for on-premises applications with Application Proxy](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy-configure-single-sign-on-on-premises-apps).</span></span>
    <span data-ttu-id="9c590-106">b.</span><span class="sxs-lookup"><span data-stu-id="9c590-106">b.</span></span> <span data-ttu-id="9c590-107">要配置 **基于密码的 SSO** 的 **云应用**，请参阅[配置密码单一登陆](https://docs.microsoft.com/azure/active-directory/manage-apps/configure-password-single-sign-on-non-gallery-applications)。</span><span class="sxs-lookup"><span data-stu-id="9c590-107">To configure a **cloud application** for **password-based SSO**, see [Configure password single sign-on](https://docs.microsoft.com/azure/active-directory/manage-apps/configure-password-single-sign-on-non-gallery-applications).</span></span>
    <span data-ttu-id="9c590-108">c.</span><span class="sxs-lookup"><span data-stu-id="9c590-108">c.</span></span> <span data-ttu-id="9c590-109">要配置 **使用应用代理的 SSO** 的 **本地应用**，请参阅[使用应用程序代理的单一登陆密码路径](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy-configure-single-sign-on-password-vaulting)。</span><span class="sxs-lookup"><span data-stu-id="9c590-109">To configure an **on-premises application** for **SSO through Application Proxy**, see [Password vaulting for single sign-on with Application Proxy](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy-configure-single-sign-on-password-vaulting).</span></span>
3. <span data-ttu-id="9c590-110">**应用程序代理问题故障排除**：我们建议首先查看故障排除工作流 - [调试应用程序代理连接器问题](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy-debug-connectors) - 来判断应用程序代理连接器是否正确配置。</span><span class="sxs-lookup"><span data-stu-id="9c590-110">**Troubleshooting Application Proxy issues**: We recommend that you start with reviewing the troubleshooting flow - [Debug Application Proxy Connector issues](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy-debug-connectors) - to determine if application proxy connectors are configured correctly.</span></span> <span data-ttu-id="9c590-111">如果你仍然无法连接到应用，请按照[调试应用程序代理应用问题](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy-debug-apps)中的步骤进行故障排除。</span><span class="sxs-lookup"><span data-stu-id="9c590-111">If you're still having trouble connecting to the application, follow the troubleshooting steps in [Debug Application Proxy application issues](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy-debug-apps).</span></span> <span data-ttu-id="9c590-112">你可以通过执行以下浏览器调试步骤来[确定 CORS 问题](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy-understand-cors-issues#understand-and-identify-cors-issues)。</span><span class="sxs-lookup"><span data-stu-id="9c590-112">You can [identify CORS issues](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy-understand-cors-issues#understand-and-identify-cors-issues) by performing the following browser debug steps: a.</span></span> <span data-ttu-id="9c590-113">启动浏览器并浏览 web 应用。</span><span class="sxs-lookup"><span data-stu-id="9c590-113">Launch the browser and browse to the web app.</span></span>
    <span data-ttu-id="9c590-114">b.</span><span class="sxs-lookup"><span data-stu-id="9c590-114">b.</span></span> <span data-ttu-id="9c590-115">按下 **F12** 调出调试控制台。</span><span class="sxs-lookup"><span data-stu-id="9c590-115">Press **F12** to bring up the debug console.</span></span>
    <span data-ttu-id="9c590-116">c.</span><span class="sxs-lookup"><span data-stu-id="9c590-116">c.</span></span> <span data-ttu-id="9c590-117">尝试重现交易并查看控制台消息。</span><span class="sxs-lookup"><span data-stu-id="9c590-117">Try to reproduce the transaction and review the console message.</span></span> <span data-ttu-id="9c590-118">若是 CORS 冲突问题，会出现关于来源的控制台错误。</span><span class="sxs-lookup"><span data-stu-id="9c590-118">A CORS violation produces a console error about origin.</span></span>
    <span data-ttu-id="9c590-119">d.</span><span class="sxs-lookup"><span data-stu-id="9c590-119">d.</span></span> <span data-ttu-id="9c590-120">某些 CORS 问题无法解决，比如当应用重点向至 login.microsoftonline.com 进行验证时访问令牌过期。</span><span class="sxs-lookup"><span data-stu-id="9c590-120">Some CORS issues can't be resolved, such as expiration of the access token when your app redirects to login.microsoftonline.com for authentication.</span></span> <span data-ttu-id="9c590-121">由于访问令牌过期，CORS 调用失败。</span><span class="sxs-lookup"><span data-stu-id="9c590-121">As a result of the access token expiration, the CORS call then fails.</span></span> <span data-ttu-id="9c590-122">此情况的解决方法之一是延长访问令牌的生命周期，来防止其在用户会话期间过期。</span><span class="sxs-lookup"><span data-stu-id="9c590-122">A workaround for this scenario is to extend the lifetime of the access token, to prevent it from expiring during a user’s session.</span></span> <span data-ttu-id="9c590-123">有关如何操作的详细信息，请参阅[Microsoft 标识平台中可配置的令牌生命周期](https://docs.microsoft.com/azure/active-directory/develop/active-directory-configurable-token-lifetimes)。</span><span class="sxs-lookup"><span data-stu-id="9c590-123">For more information about how to do this, see [Configurable token lifetimes in Microsoft identity platform](https://docs.microsoft.com/azure/active-directory/develop/active-directory-configurable-token-lifetimes).</span></span>
4. <span data-ttu-id="9c590-124">**基于 SAML 的 SSO 故障排除**：我们建议查看[登录到基于 SAML 的单一登陆配置应用相关问题](https://docs.microsoft.com/azure/active-directory/manage-apps/application-sign-in-problem-federated-sso-gallery)来查找你最有可能遇到的问题的解决方案。</span><span class="sxs-lookup"><span data-stu-id="9c590-124">**Troubleshooting SAML-based SSO**: We recommend checking [Problems signing in to SAML-based single sign-on configured apps](https://docs.microsoft.com/azure/active-directory/manage-apps/application-sign-in-problem-federated-sso-gallery) to find the solutions to the issues you are most likely to encounter.</span></span>
5. <span data-ttu-id="9c590-125">**基于密码的 SSO 故障排除**：我们建议查看[在 Azure AD 中基于密码的单一登陆故障排除](https://docs.microsoft.com/azure/active-directory/manage-apps/troubleshoot-password-based-sso)来查找你最有可能遇到的问题的解决方案。</span><span class="sxs-lookup"><span data-stu-id="9c590-125">**Troubleshooting password-based SSO**: We recommend checking [Troubleshoot password-based single sign-on in Azure AD](https://docs.microsoft.com/azure/active-directory/manage-apps/troubleshoot-password-based-sso) to find the solutions to the issues you are most likely to encounter.</span></span>
6. <span data-ttu-id="9c590-126">**我收到了配置错误**：排除配置错误的故障，我们建议查看下列文章：a.</span><span class="sxs-lookup"><span data-stu-id="9c590-126">**I received a configuration error**: To troubleshoot configuration errors, we recommend checking the following articles: a.</span></span> <span data-ttu-id="9c590-127">[登录到基于 SAML 的单一登陆配置应用的问题](https://docs.microsoft.com/azure/active-directory/manage-apps/application-sign-in-problem-federated-sso-gallery) b.</span><span class="sxs-lookup"><span data-stu-id="9c590-127">[Problems signing in to SAML-based single sign-on configured apps](https://docs.microsoft.com/azure/active-directory/manage-apps/application-sign-in-problem-federated-sso-gallery) b.</span></span> <span data-ttu-id="9c590-128">[输入了证书，但是拓展无法提交它们](https://docs.microsoft.com/azure/active-directory/manage-apps/troubleshoot-password-based-sso#credentials-are-filled-in-but-the-extension-does-not-submit-them) c.</span><span class="sxs-lookup"><span data-stu-id="9c590-128">[Credentials are filled in, but the extension does not submit them](https://docs.microsoft.com/azure/active-directory/manage-apps/troubleshoot-password-based-sso#credentials-are-filled-in-but-the-extension-does-not-submit-them) c.</span></span> <span data-ttu-id="9c590-129">[输入并提交了证书，但是页面提示证书不正确](https://docs.microsoft.com/azure/active-directory/manage-apps/troubleshoot-password-based-sso) d.</span><span class="sxs-lookup"><span data-stu-id="9c590-129">[Credentials are filled in and submitted, but the page indicates the credentials are incorrect](https://docs.microsoft.com/azure/active-directory/manage-apps/troubleshoot-password-based-sso) d.</span></span> [<span data-ttu-id="9c590-130">用户登录后应用页面显示错误消息</span><span class="sxs-lookup"><span data-stu-id="9c590-130">An app page shows an error message after the user signs in</span></span>](https://docs.microsoft.com/azure/active-directory/manage-apps/application-sign-in-problem-application-error)
7. <span data-ttu-id="9c590-131">**将无缝 SSO 和我的本地应用集成时遇到问题**：要故障排除有关 SSO 和本地应用集成的问题，我们建议阅读下列文章：a.</span><span class="sxs-lookup"><span data-stu-id="9c590-131">**I am having issues integrating Seamless SSO with my on-premises apps**: To troubleshoot issues regarding integration of Seamless SSO with on-premises apps, we recommend checking the following articles: a.</span></span> <span data-ttu-id="9c590-132">[如何配置应用程序代理应用的单一登陆](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy-config-sso-how-to) b.</span><span class="sxs-lookup"><span data-stu-id="9c590-132">[How to configure single sign-on to an Application Proxy application](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy-config-sso-how-to) b.</span></span> <span data-ttu-id="9c590-133">[使用应用程序代理进行本地应用 SAML 单一登陆](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy-configure-single-sign-on-on-premises-apps) c.</span><span class="sxs-lookup"><span data-stu-id="9c590-133">[SAML single sign-on for on-premises applications with Application Proxy](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy-configure-single-sign-on-on-premises-apps) c.</span></span> <span data-ttu-id="9c590-134">[了解并解决 Azure Active Directory 应用程序代理 CORS 问题](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy-understand-cors-issues#solutions-for-application-proxy-cors-issues) d.</span><span class="sxs-lookup"><span data-stu-id="9c590-134">[Understand and solve Azure Active Directory Application Proxy CORS issues](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy-understand-cors-issues#solutions-for-application-proxy-cors-issues) d.</span></span> [<span data-ttu-id="9c590-135">应用程序代理 Kerberos 约束委派配置故障排除</span><span class="sxs-lookup"><span data-stu-id="9c590-135">Troubleshoot Kerberos constrained delegation configurations for Application Proxy</span></span>](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy-back-end-kerberos-constrained-delegation-how-to)
8. <span data-ttu-id="9c590-136">**我需要解决声明或延长令牌生命周期。我需要更改会话的长度**：如果是这样，我们建议阅读下列文章：a.</span><span class="sxs-lookup"><span data-stu-id="9c590-136">**I need to fix the claims or extend the lifetime of a token. I need to change the length of a session**: To do this, we recommend checking the following articles: a.</span></span> <span data-ttu-id="9c590-137">[自定义发送到应用的 SAML 声明](https://docs.microsoft.com/azure/active-directory/develop/active-directory-claims-mapping) b.</span><span class="sxs-lookup"><span data-stu-id="9c590-137">[Customize SAML claims sent to an application](https://docs.microsoft.com/azure/active-directory/develop/active-directory-claims-mapping) b.</span></span> <span data-ttu-id="9c590-138">[使用感知声明的应用](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy-configure-for-claims-aware-applications) c.</span><span class="sxs-lookup"><span data-stu-id="9c590-138">[Working with claims-aware apps](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy-configure-for-claims-aware-applications) c.</span></span> <span data-ttu-id="9c590-139">[Microsoft 标识平台中可配置令牌的生命周期](https://docs.microsoft.com/azure/active-directory/develop/active-directory-configurable-token-lifetimes) d.</span><span class="sxs-lookup"><span data-stu-id="9c590-139">[Configurable token lifetimes in Microsoft identity platform](https://docs.microsoft.com/azure/active-directory/develop/active-directory-configurable-token-lifetimes) d.</span></span> <span data-ttu-id="9c590-140">[使用条件访问配置身份验证会话管理](https://docs.microsoft.com/azure/active-directory/conditional-access/howto-conditional-access-session-lifetime) e.</span><span class="sxs-lookup"><span data-stu-id="9c590-140">[Configure authentication session management with Conditional Access](https://docs.microsoft.com/azure/active-directory/conditional-access/howto-conditional-access-session-lifetime) e.</span></span> [<span data-ttu-id="9c590-141">访问本地应用的 Cookie 设置</span><span class="sxs-lookup"><span data-stu-id="9c590-141">Cookie settings for accessing on-premises applications</span></span>](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy-configure-cookie-settings)
9. <span data-ttu-id="9c590-142">**我需要帮助管理我的用户和来宾用户 (B2B) 的访问权限**：有关管理用户和来宾用户访问权限的详细信息，我们建议阅读下列文章：a.</span><span class="sxs-lookup"><span data-stu-id="9c590-142">**I need help managing my user's and guest users' (B2B) access**: For detailed information on managing user's and guest user's access, we recommend checking the following articles: a.</span></span> <span data-ttu-id="9c590-143">[管理应用访问权限](https://docs.microsoft.com/azure/active-directory/manage-apps/what-is-access-management) b.</span><span class="sxs-lookup"><span data-stu-id="9c590-143">[Managing access to apps](https://docs.microsoft.com/azure/active-directory/manage-apps/what-is-access-management) b.</span></span> <span data-ttu-id="9c590-144">[在 Azure Active Directory 中管理应用的用户分配](https://docs.microsoft.com/azure/active-directory/manage-apps/assign-user-or-group-access-portal) c.</span><span class="sxs-lookup"><span data-stu-id="9c590-144">[Manage user assignment for an app in Azure Active Directory](https://docs.microsoft.com/azure/active-directory/manage-apps/assign-user-or-group-access-portal) c.</span></span> <span data-ttu-id="9c590-145">[为 B2B 协作配置 SaaS 应用](https://docs.microsoft.com/azure/active-directory/external-identities/configure-saas-apps) d.</span><span class="sxs-lookup"><span data-stu-id="9c590-145">[Configure SaaS apps for B2B collaboration](https://docs.microsoft.com/azure/active-directory/external-identities/configure-saas-apps) d.</span></span> <span data-ttu-id="9c590-146">[授权 Azure AD 中的 B2B 用户访问本地应用的权限](https://docs.microsoft.com/azure/active-directory/external-identities/configure-saas-apps) e.</span><span class="sxs-lookup"><span data-stu-id="9c590-146">[Grant B2B users in Azure AD access to your on-premises applications](https://docs.microsoft.com/azure/active-directory/external-identities/configure-saas-apps) e.</span></span> [<span data-ttu-id="9c590-147">使用 Azure AD B2B 协作将本地托管的合作伙伴账户权限授权给云资源</span><span class="sxs-lookup"><span data-stu-id="9c590-147">Grant locally-managed partner accounts access to cloud resources using Azure AD B2B collaboration</span></span>](https://docs.microsoft.com/azure/active-directory/external-identities/hybrid-on-premises-to-cloud)
10. <span data-ttu-id="9c590-148">**我想自定义我的应用**：有关自定义应用的详细信息，我们建议阅读下列文章：a.</span><span class="sxs-lookup"><span data-stu-id="9c590-148">**I want to customize my apps**: For detailed information on customizing apps, we recommend checking the following articles: a.</span></span> <span data-ttu-id="9c590-149">[使用 Azure AD 应用程序代理配置自定义域](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy-configure-custom-domain) b.</span><span class="sxs-lookup"><span data-stu-id="9c590-149">[Configure custom domains with Azure AD Application Proxy](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy-configure-custom-domain) b.</span></span> <span data-ttu-id="9c590-150">[为发布的应用设置自定义主页](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy-configure-custom-home-page) c.</span><span class="sxs-lookup"><span data-stu-id="9c590-150">[Set a custom home page for published apps](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy-configure-custom-home-page) c.</span></span> [<span data-ttu-id="9c590-151">通配符应用</span><span class="sxs-lookup"><span data-stu-id="9c590-151">Wildcard applications</span></span>](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy-wildcard)
11. <span data-ttu-id="9c590-152">**我在从 AD FS 迁移到 Azure 时遇到问题**：要故障排除在将应用从 AD FS 迁移到 Azure 时遇到的问题，我们建议阅读下列文章：a.</span><span class="sxs-lookup"><span data-stu-id="9c590-152">**I'm having issues migrating my app from AD FS to Azure**: To troubleshoot issues encountered during migration of your app from AD FS to Azure, we recommend checking the following articles: a.</span></span> <span data-ttu-id="9c590-153">[将应用的身份验证从 Active Directory 联合身份验证服务移动到 Azure Active Directory](https://docs.microsoft.com/azure/active-directory/manage-apps/migrate-adfs-apps-to-azure) b.</span><span class="sxs-lookup"><span data-stu-id="9c590-153">[Moving application authentication from Active Directory Federation Services to Azure Active Directory](https://docs.microsoft.com/azure/active-directory/manage-apps/migrate-adfs-apps-to-azure) b.</span></span> [<span data-ttu-id="9c590-154">有关迁移应用到 Azure Active Directory 的资源</span><span class="sxs-lookup"><span data-stu-id="9c590-154">Resources for migrating applications to Azure Active Directory</span></span>](https://docs.microsoft.com/azure/active-directory/manage-apps/migration-resources)

