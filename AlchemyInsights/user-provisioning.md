---
title: 用户预配
ms.author: v-jmathew
author: v-jmathew
manager: scotv
audience: Admin
ms.topic: article
ms.service: o365-administration
ROBOTS: NOINDEX, NOFOLLOW
localization_priority: Normal
ms.collection: Adm_O365
ms.custom:
- "9004348"
- "8428"
ms.openlocfilehash: bd415b2d44bccf0c2b3eccb4e38452498b748b3a
ms.sourcegitcommit: 379e132c4d21ecf703d5506484ec96a767fdda39
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/04/2021
ms.locfileid: "50430715"
---
# <a name="user-provisioning"></a><span data-ttu-id="51ba5-102">用户预配</span><span class="sxs-lookup"><span data-stu-id="51ba5-102">User provisioning</span></span>

- <span data-ttu-id="51ba5-103">使用 [按需预配功能](https://docs.microsoft.com/azure/active-directory/app-provisioning/provision-on-demand) 预配用户，并获取有关所执行步骤的详细诊断。</span><span class="sxs-lookup"><span data-stu-id="51ba5-103">Use the [on-demand provisioning](https://docs.microsoft.com/azure/active-directory/app-provisioning/provision-on-demand) capability to provision a user and get detailed diagnostics about the steps taken.</span></span>
- <span data-ttu-id="51ba5-104">若要解决预配用户和组时遇到的疑难问题，请参阅疑难解答指南 [未对用户进行预配](https://docs.microsoft.com/azure/active-directory/app-provisioning/application-provisioning-config-problem-no-users-provisioned)。</span><span class="sxs-lookup"><span data-stu-id="51ba5-104">To troubleshoot issues you encounter when provisioning users and groups, see the troubleshooting guide [No users are being provisioned](https://docs.microsoft.com/azure/active-directory/app-provisioning/application-provisioning-config-problem-no-users-provisioned).</span></span>
- <span data-ttu-id="51ba5-105">如果看到未预配用户，请参阅 Active Directory (AD) 中的 [预配日志（预览）](https://docs.microsoft.com/azure/active-directory/reports-monitoring/concept-provisioning-logs)。</span><span class="sxs-lookup"><span data-stu-id="51ba5-105">If you observe that users are not being provisioned, see [Provisioning logs (preview)](https://docs.microsoft.com/azure/active-directory/reports-monitoring/concept-provisioning-logs) in Azure Active Directory (AD).</span></span> <span data-ttu-id="51ba5-106">搜索针对特定用户的日志条目。</span><span class="sxs-lookup"><span data-stu-id="51ba5-106">Search for log entries pertaining to a specific user.</span></span>
- <span data-ttu-id="51ba5-107">定期重新启动预配，以捕获在上一个预配周期中错过的任何用户。</span><span class="sxs-lookup"><span data-stu-id="51ba5-107">Periodically restart provisioning to catch any users that were missed in a previous provisioning cycle.</span></span>
- <span data-ttu-id="51ba5-108">用户/组可能尚未设置，因为我们的服务尚未有机会评估用户。</span><span class="sxs-lookup"><span data-stu-id="51ba5-108">The user/group may not have been provisioned because our service hasn't had a chance to evaluate the user yet.</span></span> <span data-ttu-id="51ba5-109">查看预配需要的时间以及设置配置页面上的进度栏的指南。</span><span class="sxs-lookup"><span data-stu-id="51ba5-109">Review the guidance for how long provisioning takes as well as the progress bar on the provisioning configuration page.</span></span> <span data-ttu-id="51ba5-110">如果其他详细信息部分中指定的稳定状态在用户创建/更新/删除日期之前，这意味着我们尚未评估用户。</span><span class="sxs-lookup"><span data-stu-id="51ba5-110">If the steady state specified in the additional details section is before the date the user was created/updated/deleted, it means we have not evaluated the user yet.</span></span> <span data-ttu-id="51ba5-111">在此方案中，最好等待预配服务完成。</span><span class="sxs-lookup"><span data-stu-id="51ba5-111">In this scenario, the best thing to do is wait for the provisioning service to finish.</span></span> <span data-ttu-id="51ba5-112">如果已实现稳定状态，我们建议在 Azure 门户中从 UI 重新启动。</span><span class="sxs-lookup"><span data-stu-id="51ba5-112">If the steady state has been achieved, we recommend performing a restart from the UI in the Azure Portal.</span></span>
  - <span data-ttu-id="51ba5-113">请注意，我们的服务仅知道对 Azure Active Directory (源系统中用户/) 。</span><span class="sxs-lookup"><span data-stu-id="51ba5-113">Note that our service is only aware of changes to a user/group in the source system (Azure Active Directory).</span></span> <span data-ttu-id="51ba5-114">如果直接在应用程序中删除用户/组 (例如 ServiceNow) ，我们将不会注意到这些更改，并且不会根据源系统中用户的状态回滚。</span><span class="sxs-lookup"><span data-stu-id="51ba5-114">If a user/group is removed directly in the application (for example, ServiceNow), we are not aware of those changes and do not roll it back based on the state of the user in the source system.</span></span> <span data-ttu-id="51ba5-115">在此方案中，最好直接在目标应用程序中回滚更改。</span><span class="sxs-lookup"><span data-stu-id="51ba5-115">In this scenario, it is best to roll back the change directly in the target application.</span></span>
- <span data-ttu-id="51ba5-116">我们的服务评估了用户/组，确定不应进行设置：</span><span class="sxs-lookup"><span data-stu-id="51ba5-116">Our service evaluated the user/group and determined it should not be provisioned:</span></span>
  - <span data-ttu-id="51ba5-117">如果已将作用域设置为已分配的用户和组，请检查用户/组是否分配给应用程序。</span><span class="sxs-lookup"><span data-stu-id="51ba5-117">If you have set the scope to assigned users and groups, check if the user/group is assigned to the application.</span></span>
  - <span data-ttu-id="51ba5-118">如果将用户/组分配给应用程序，请确保未将其分配给默认访问角色。</span><span class="sxs-lookup"><span data-stu-id="51ba5-118">If the user/group is assigned to the application, ensure that they are not assigned to the default access role.</span></span> <span data-ttu-id="51ba5-119">此角色不能用于预配。</span><span class="sxs-lookup"><span data-stu-id="51ba5-119">This role cannot be used for provisioning.</span></span>
  - <span data-ttu-id="51ba5-120">如果已设置基于属性的作用域筛选器，请确保用户满足您指定的条件。</span><span class="sxs-lookup"><span data-stu-id="51ba5-120">If you have set an attribute based scoping filter, ensure that the user meets the criteria that you have specified.</span></span>
  - <span data-ttu-id="51ba5-121">如果用户已存在于目标系统中以及源和目标匹配中的用户状态，我们不会执行任何其他操作。</span><span class="sxs-lookup"><span data-stu-id="51ba5-121">If users already exist in the target system and the state of the user in the source and target match, we won't take any further action.</span></span>
- <span data-ttu-id="51ba5-122">我们的服务尝试设置用户，但失败。</span><span class="sxs-lookup"><span data-stu-id="51ba5-122">Our service attempted to provision the user and it failed.</span></span> <span data-ttu-id="51ba5-123">对于这些方案，请查看预配日志的"疑难解答和建议"选项卡：</span><span class="sxs-lookup"><span data-stu-id="51ba5-123">For these scenarios, review the troubleshooting and recommendations tab of the provisioning logs:</span></span>
  - <span data-ttu-id="51ba5-124">Azure Active Directory 中可能缺少用户所需的属性，或者与第三方应用程序所需的格式不匹配。</span><span class="sxs-lookup"><span data-stu-id="51ba5-124">A required attribute on the user might be missing in Azure Active Directory or does not match the format required by the third party application.</span></span> <span data-ttu-id="51ba5-125">例如，当用户的 Country 属性应为美国时，该属性可能会设置为美国。</span><span class="sxs-lookup"><span data-stu-id="51ba5-125">For example, the Country attribute on a user might be set to United States when it should be US.</span></span>
  - <span data-ttu-id="51ba5-126">该属性是目标应用程序中尚不存在的参照属性。</span><span class="sxs-lookup"><span data-stu-id="51ba5-126">The attribute is a referential attribute that does not yet exist in the target application.</span></span> <span data-ttu-id="51ba5-127">引用属性是指向另一个对象（例如，作为组的成员的用户）的属性。</span><span class="sxs-lookup"><span data-stu-id="51ba5-127">A referential attribute is an attribute that points to another object, for example, a user that is a member of a group.</span></span> <span data-ttu-id="51ba5-128">用户的 ID 将位于组的成员属性中，但只能在它指向的用户对象已存在时进行处理。</span><span class="sxs-lookup"><span data-stu-id="51ba5-128">The user's ID would be in the member attribute of the group, but can only be processed if the user object it points to already exists.</span></span>
